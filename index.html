<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KAVISH SURFER | ARCHITECT EDITION</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Share+Tech+Mono&display=swap');

        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #bc13fe;
            --danger: #ff2e2e;
            --bg-dark: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }

        body {
            background: #000;
            font-family: 'Share Tech Mono', monospace;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #fff;
        }

        /* --- THE SUPER RGB BOX --- */
        #game-container {
            position: relative;
            width: 400px;
            height: 600px;
            background: #111;
            border: 4px solid #fff;
            animation: rgbShift 3s linear infinite;
            overflow: hidden;
        }

        @keyframes rgbShift {
            0% { border-color: #ff0000; box-shadow: 0 0 20px #ff0000; }
            33% { border-color: #00ff00; box-shadow: 0 0 20px #00ff00; }
            66% { border-color: #0000ff; box-shadow: 0 0 20px #0000ff; }
            100% { border-color: #ff0000; box-shadow: 0 0 20px #ff0000; }
        }

        canvas { display: block; background: linear-gradient(#001, #003); }

        /* --- UI OVERLAYS --- */
        .overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            text-align: center;
        }

        .hidden { display: none !important; }

        .btn {
            background: none;
            border: 2px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 12px 24px;
            margin: 10px;
            font-family: 'Syncopate';
            font-size: 0.7rem;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn:hover { background: var(--neon-blue); color: #000; }
        .btn-shop { border-color: var(--neon-pink); color: var(--neon-pink); }
        .btn-shop:hover { background: var(--neon-pink); color: #000; }

        #hud {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
            color: var(--neon-blue);
            pointer-events: none;
        }

        .board-active { color: var(--neon-pink); font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="hud">
        <div>COINS: <span id="coin-count">0</span></div>
        <div id="board-stat"></div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="start-screen" class="overlay">
        <h1 style="font-family:'Syncopate'; font-size:1.2rem; margin-bottom:20px;">ARCHITECT SURFER</h1>
        <button class="btn" onclick="Game.start()">RUN_SYSTEM</button>
        <button id="shop-btn" class="btn btn-shop" onclick="Game.buyBoard()">BUY BOARD (50 COINS)</button>
    </div>

    <div id="death-screen" class="overlay hidden">
        <h2 style="color:var(--danger); font-family:'Syncopate'; margin-bottom:20px;">CRITICAL_COLLISION</h2>
        <button class="btn" onclick="Game.start()">REBOOT</button>
    </div>
</div>

<script>
/**
 * SUBWAY SURFER - ARCHITECT EDITION 5.4
 * NO ROLLING | DOUBLE JUMP | BOARD SHOP
 */

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 400;
canvas.height = 600;

const Game = {
    active: false,
    coins: 0,
    hasBoard: false,
    speed: 5,
    player: null,
    obstacles: [],
    collectibles: [],
    frame: 0,

    start() {
        this.active = true;
        this.player = new Player();
        this.obstacles = [];
        this.collectibles = [];
        this.frame = 0;
        this.speed = 5;
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('death-screen').classList.add('hidden');
        this.loop();
    },

    die() {
        if (this.hasBoard) {
            this.hasBoard = false;
            document.getElementById('board-stat').innerText = "";
            return; // Shield used
        }
        this.active = false;
        document.getElementById('death-screen').classList.remove('hidden');
    },

    buyBoard() {
        if (this.coins >= 50 && !this.hasBoard) {
            this.coins -= 50;
            this.hasBoard = true;
            document.getElementById('coin-count').innerText = this.coins;
            document.getElementById('board-stat').innerText = "BOARD ACTIVE";
            alert("SURFBOARD EQUIPPED: SHIELD ACTIVE");
        } else if(this.hasBoard) {
            alert("ALREADY EQUIPPED");
        } else {
            alert("INSUFFICIENT COINS");
        }
    },

    loop() {
        if (!this.active) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Background track lines
        ctx.strokeStyle = "#222";
        ctx.beginPath(); ctx.moveTo(133,0); ctx.lineTo(133,600); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(266,0); ctx.lineTo(266,600); ctx.stroke();

        this.player.update();
        this.player.draw();

        // Spawn logic
        if (this.frame % 100 === 0) this.spawnObstacle();
        if (this.frame % 60 === 0) this.spawnCoin();

        // Handle Obstacles
        for (let i = this.obstacles.length - 1; i >= 0; i--) {
            this.obstacles[i].y += this.speed;
            this.obstacles[i].draw();

            // Collision
            if (this.player.x < this.obstacles[i].x + 40 &&
                this.player.x + 40 > this.obstacles[i].x &&
                this.player.y < this.obstacles[i].y + 40 &&
                this.player.y + 40 > this.obstacles[i].y) {
                this.obstacles.splice(i, 1);
                this.die();
            }
            else if (this.obstacles[i].y > 600) this.obstacles.splice(i, 1);
        }

        // Handle Coins
        for (let i = this.collectibles.length - 1; i >= 0; i--) {
            this.collectibles[i].y += this.speed;
            this.collectibles[i].draw();

            if (this.player.x < this.collectibles[i].x + 20 &&
                this.player.x + 40 > this.collectibles[i].x &&
                this.player.y < this.collectibles[i].y + 20 &&
                this.player.y + 40 > this.collectibles[i].y) {
                this.coins += 5;
                document.getElementById('coin-count').innerText = this.coins;
                this.collectibles.splice(i, 1);
            }
            else if (this.collectibles[i].y > 600) this.collectibles.splice(i, 1);
        }

        this.frame++;
        this.speed += 0.001; // Slow difficulty ramp
        requestAnimationFrame(() => this.loop());
    },

    spawnObstacle() {
        const lanes = [46, 179, 312];
        this.obstacles.push({
            x: lanes[Math.floor(Math.random() * 3)],
            y: -50,
            draw() {
                ctx.fillStyle = "red";
                ctx.fillRect(this.x, this.y, 40, 40);
                ctx.strokeStyle = "white";
                ctx.strokeRect(this.x, this.y, 40, 40);
            }
        });
    },

    spawnCoin() {
        const lanes = [56, 189, 322];
        this.collectibles.push({
            x: lanes[Math.floor(Math.random() * 3)],
            y: -50,
            draw() {
                ctx.fillStyle = "yellow";
                ctx.beginPath();
                ctx.arc(this.x + 10, this.y + 10, 10, 0, Math.PI * 2);
                ctx.fill();
            }
        });
    }
};

class Player {
    constructor() {
        this.lane = 1; // 0, 1, 2
        this.x = 179;
        this.y = 500;
        this.dy = 0;
        this.jumpCount = 0;
        this.isJumping = false;
    }

    update() {
        // Lane movement
        const targetX = [46, 179, 312][this.lane];
        this.x += (targetX - this.x) * 0.2;

        // Jump physics
        this.y += this.dy;
        if (this.y < 500) {
            this.dy += 0.8; // Gravity
        } else {
            this.y = 500;
            this.dy = 0;
            this.jumpCount = 0;
        }
    }

    draw() {
        ctx.fillStyle = Game.hasBoard ? "var(--neon-pink)" : "var(--neon-blue)";
        ctx.fillRect(this.x, this.y, 40, 40);
        if (Game.hasBoard) {
            ctx.strokeStyle = "white";
            ctx.strokeRect(this.x-5, this.y+35, 50, 10);
        }
    }

    jump() {
        if (this.jumpCount < 2) {
            this.dy = -12;
            this.jumpCount++;
        }
    }
}

// --- INPUTS ---
window.addEventListener('keydown', (e) => {
    if (!Game.active) return;
    if (e.key === "ArrowLeft" && Game.player.lane > 0) Game.player.lane--;
    if (e.key === "ArrowRight" && Game.player.lane < 2) Game.player.lane++;
    if (e.key === "ArrowUp" || e.key === " ") Game.player.jump();
    // Down Arrow (Roll) is ignored - feature removed.
});
</script>
</body>
</html>
