<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KAVISH SHAH | NEON SURFER 3D</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=JetBrains+Mono:wght@400;800&display=swap');
        :root { --neon-blue: #00f2ff; --neon-pink: #ff00ea; --bg: #050508; }
        
        * { box-sizing: border-box; margin: 0; padding: 0; touch-action: none; }
        body { 
            font-family: 'JetBrains Mono', monospace; 
            background: var(--bg); color: #fff; 
            height: 100vh; display: flex; flex-direction: column; align-items: center;
        }

        /* --- THE MICRO-FRAME (Raised & Smaller) --- */
        #gameWrapper {
            margin-top: 15vh; /* Pushes the game up away from bottom bars */
            width: 90vw;
            max-width: 400px;
            height: 45vh; /* Much smaller height for safety */
            border: 3px solid var(--neon-blue);
            border-radius: 20px;
            position: relative;
            background: #000;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 242, 255, 0.2);
        }

        canvas { width: 100%; height: 100%; display: block; }

        /* --- SCORE OVERLAY --- */
        .score-hud {
            position: absolute; top: 10px; width: 100%;
            display: flex; justify-content: center;
            font-size: 1.2rem; font-weight: 800; color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
        }

        /* --- ARROW BUTTONS --- */
        .btn-container {
            display: flex; gap: 30px; margin-top: 20px;
            width: 90%; max-width: 400px;
        }
        .arrow-btn {
            flex: 1; height: 80px; background: #111;
            border: 2px solid var(--neon-blue); color: var(--neon-blue);
            border-radius: 15px; font-size: 2.5rem;
            display: flex; align-items: center; justify-content: center;
        }
        .arrow-btn:active { background: var(--neon-blue); color: #000; }

        .death-msg {
            position: absolute; inset: 0; background: rgba(0,0,0,0.9);
            display: none; flex-direction: column; align-items: center; justify-content: center;
        }
    </style>
</head>
<body>

    <h1 style="font-family:'Syncopate'; font-size: 0.8rem; margin-top: 20px; letter-spacing: 3px;">SYSTEM SURFER</h1>

    <div id="gameWrapper">
        <div class="score-hud">SCR: <span id="scoreVal">0</span></div>
        <canvas id="gameCanvas"></canvas>
        <div id="deathMsg" class="death-msg">
            <h2 style="color:var(--neon-pink); font-family:'Syncopate';">CRASHED</h2>
            <button onclick="game.init()" style="margin-top:20px; padding:10px 20px; background:none; border:1px solid #fff; color:#fff;">RETRY</button>
        </div>
    </div>

    <div class="btn-container">
        <div class="arrow-btn" id="leftBtn">◀</div>
        <div class="arrow-btn" id="rightBtn">▶</div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let startX = 0;

        const game = {
            active: false, score: 0, lane: 0, targetLane: 0,
            obstacles: [], speed: 0.05, lastFrame: 0,

            init() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                this.active = true; this.score = 0; this.lane = 0; this.targetLane = 0;
                this.obstacles = []; this.speed = 0.05;
                document.getElementById('deathMsg').style.display = 'none';
                requestAnimationFrame((t) => this.loop(t));
            },

            move(dir) { this.targetLane = Math.max(-1, Math.min(1, this.targetLane + dir)); },

            loop(t) {
                if (!this.active) return;
                this.update(); this.draw();
                requestAnimationFrame((t) => this.loop(t));
            },

            update() {
                this.score++;
                document.getElementById('scoreVal').innerText = Math.floor(this.score/10);
                this.lane += (this.targetLane - this.lane) * 0.2;
                this.speed += 0.00002;

                if (Math.random() < 0.05) this.obstacles.push({ lane: Math.floor(Math.random()*3)-1, z: 2 });

                for (let i = this.obstacles.length - 1; i >= 0; i--) {
                    let o = this.obstacles[i];
                    o.z -= this.speed;
                    // Collision Check
                    if (o.z < 0.3 && o.z > 0.1 && Math.abs(o.lane - this.lane) < 0.5) this.gameOver();
                    if (o.z < 0) this.obstacles.splice(i, 1);
                }
            },

            draw() {
                ctx.fillStyle = '#000'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                const cx = canvas.width / 2;
                const horizY = canvas.height * 0.3;

                // Perspective Floor
                ctx.strokeStyle = '#111';
                for(let i=0; i<10; i++) {
                    let z = (i/10 + (this.score*0.01)%0.1);
                    let y = horizY + (canvas.height-horizY)*z;
                    ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(canvas.width, y); ctx.stroke();
                }

                // Obstacles
                this.obstacles.forEach(o => {
                    let s = 1/o.z;
                    let x = cx + (o.lane - this.lane) * (canvas.width * 0.4) * s;
                    let y = horizY + (canvas.height - horizY) * s;
                    let sz = (canvas.width * 0.2) * s;
                    ctx.fillStyle = var(--neon-pink);
                    ctx.shadowBlur = 10*s; ctx.shadowColor = '#ff00ea';
                    ctx.fillRect(x-sz/2, y-sz, sz, sz);
                });

                // Character (The Architect Box)
                ctx.fillStyle = '#00f2ff';
                ctx.shadowBlur = 15; ctx.shadowColor = '#00f2ff';
                // Drawn high (80% down instead of 100%) to stay above browser bars
                let pSz = canvas.width * 0.15;
                ctx.fillRect(cx - pSz/2, canvas.height * 0.75, pSz, pSz);
            },

            gameOver() { this.active = false; document.getElementById('deathMsg').style.display = 'flex'; }
        };

        // Swipe Detection
        canvas.addEventListener('touchstart', e => startX = e.touches[0].clientX);
        canvas.addEventListener('touchend', e => {
            let diff = e.changedTouches[0].clientX - startX;
            if (Math.abs(diff) > 30) game.move(diff > 0 ? 1 : -1);
        });

        // Button Controls
        document.getElementById('leftBtn').addEventListener('pointerdown', () => game.move(-1));
        document.getElementById('rightBtn').addEventListener('pointerdown', () => game.move(1));

        game.init();
    </script>
</body>
</html>
