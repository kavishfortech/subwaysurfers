<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- ========================================================= -->
<!-- =================== META & VIEWPORT ==================== -->
<!-- ========================================================= -->

<meta name="viewport"
      content="width=device-width,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no">

<title>SUBWAY ARCHITECT — Endless Runner</title>

<!-- ========================================================= -->
<!-- ====================== FONTS ============================ -->
<!-- ========================================================= -->

<style>
@import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Share+Tech+Mono&display=swap');
</style>

<!-- ========================================================= -->
<!-- ====================== STYLES =========================== -->
<!-- ========================================================= -->

<style>

/* ========================================================= */
/* ====================== ROOT ============================== */
/* ========================================================= */

:root {

    --neon-blue: #00f3ff;
    --neon-pink: #bc13fe;
    --neon-gold: #ffd700;
    --danger: #ff2e2e;
    --bg-dark: #050510;
    --panel-dark: rgba(0,0,0,0.7);

}

/* ========================================================= */
/* ====================== RESET ============================= */
/* ========================================================= */

* {
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
}

/* ========================================================= */
/* ====================== BODY ============================== */
/* ========================================================= */

body {

    margin: 0;
    padding: 0;

    width: 100vw;
    height: 100vh;

    background: var(--bg-dark);
    color: white;

    font-family: 'Share Tech Mono', monospace;

    overflow: hidden;

}

/* ========================================================= */
/* ====================== CANVAS ============================ */
/* ========================================================= */

canvas {

    display: block;
    width: 100%;
    height: 100%;

}

/* ========================================================= */
/* ====================== UI LAYER ========================== */
/* ========================================================= */

#ui-layer {

    position: absolute;
    inset: 0;

    z-index: 10;
    pointer-events: none;

}

/* ========================================================= */
/* ====================== HUD =============================== */
/* ========================================================= */

.hud-top {

    position: absolute;
    top: 0;
    width: 100%;

    display: flex;
    justify-content: space-between;

    padding: 15px;

}

.hud-box {

    background: var(--panel-dark);

    padding: 10px 20px;

    border-radius: 6px;
    border: 1px solid #333;

    text-align: center;

}

.hud-label {

    font-size: 0.6rem;
    color: #888;

}

.hud-val {

    font-family: 'Syncopate';
    font-size: 1.2rem;

}

/* ========================================================= */
/* ====================== BUTTONS =========================== */
/* ========================================================= */

.btn {

    padding: 14px 36px;
    margin: 10px;

    background: transparent;
    border: 2px solid var(--neon-blue);

    color: var(--neon-blue);
    font-family: 'Syncopate';

    cursor: pointer;

}

.btn-gold {

    border-color: var(--neon-gold);
    color: var(--neon-gold);

}

.btn-danger {

    border-color: var(--danger);
    color: var(--danger);

}

/* ========================================================= */
/* ====================== SCREENS =========================== */
/* ========================================================= */

.screen {

    position: absolute;
    inset: 0;

    background: rgba(5,5,10,0.92);

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    z-index: 20;

}

.hidden {

    display: none;

}

/* ========================================================= */
/* ====================== TITLES ============================ */
/* ========================================================= */

h1 {

    font-family: 'Syncopate';
    text-align: center;

    background: linear-gradient(
        45deg,
        var(--neon-blue),
        var(--neon-pink)
    );

    -webkit-background-clip: text;
    color: transparent;

}

/* ========================================================= */
/* ====================== PAUSE BUTTON ====================== */
/* ========================================================= */

#pauseBtn {

    position: absolute;
    bottom: 20px;
    right: 20px;

    pointer-events: auto;

}

/* ========================================================= */
/* ====================== TOUCH ZONES ======================= */
/* ========================================================= */

.touch-zones {

    position: absolute;
    bottom: 0;

    width: 100%;
    height: 50vh;

    display: grid;
    grid-template-columns: 1fr 1fr;

    z-index: 5;

}

</style>
</head>

<body>

<!-- ========================================================= -->
<!-- ====================== CANVAS =========================== -->
<!-- ========================================================= -->

<canvas id="gameCanvas"></canvas>

<!-- ========================================================= -->
<!-- ====================== UI =============================== -->
<!-- ========================================================= -->

<div id="ui-layer">

    <div class="hud-top">

        <div class="hud-box" style="border-bottom:3px solid var(--neon-blue)">
            <div class="hud-label">DISTANCE</div>
            <div class="hud-val" id="scoreDisplay">0</div>
        </div>

        <div class="hud-box" style="border-bottom:3px solid var(--neon-gold)">
            <div class="hud-label">BANK</div>
            <div class="hud-val" id="coinDisplay" style="color:var(--neon-gold)">0</div>
        </div>

    </div>

    <button id="pauseBtn"
            class="btn btn-gold hidden"
            onclick="Game.togglePause()">STOP</button>

</div>

<!-- ========================================================= -->
<!-- ====================== MENU ============================= -->
<!-- ========================================================= -->

<div id="menuScreen" class="screen">

    <h1>SUBWAY<br>ARCHITECT</h1>

    <p id="deviceInfo" style="color:#777"></p>

    <button class="btn" onclick="Game.start()">START</button>

</div>

<!-- ========================================================= -->
<!-- ====================== GAME OVER ======================== -->
<!-- ========================================================= -->

<div id="deathScreen" class="screen hidden">

    <h1 style="color:var(--danger)">GAME OVER</h1>

    <p>DISTANCE:
        <span id="finalScore">0</span>
    </p>

    <button class="btn" onclick="Game.start()">RESTART</button>
    <button class="btn btn-danger" onclick="Game.quit()">QUIT</button>

</div>

<!-- ========================================================= -->
<!-- ====================== TOUCH ============================ -->
<!-- ========================================================= -->

<div class="touch-zones hidden" id="touchZones">
    <div></div>
    <div></div>
</div>

<!-- ========================================================= -->
<!-- ====================== SCRIPT =========================== -->
<!-- ========================================================= -->

<script>

/* ========================================================= */
/* ====================== DEVICE ============================ */
/* ========================================================= */

const isDesktop =
    !(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent));

document.getElementById("deviceInfo").innerText =
    isDesktop
        ? "DESKTOP DETECTED — KEYBOARD ENABLED"
        : "MOBILE DETECTED — TOUCH ENABLED";

/* ========================================================= */
/* ====================== CANVAS ============================ */
/* ========================================================= */

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

/* ========================================================= */
/* ====================== CONFIG ============================ */
/* ========================================================= */

const CFG = {

    GRAVITY: 0.6,
    JUMP_FORCE: -13,
    SPEED: 7,

    GROUND_Y: 0

};

/* ========================================================= */
/* ====================== GAME CORE ========================= */
/* ========================================================= */

const Game = {

    active: false,
    paused: false,

    score: 0,
    coins: 0,

    start() {

        this.active = true;
        this.paused = false;

        this.score = 0;
        this.coins = 0;

        World.reset();
        Player.reset();

        hideAllScreens();

        pauseBtn.classList.remove("hidden");

        loop();

    },

    over() {

        this.active = false;

        pauseBtn.classList.add("hidden");

        finalScore.innerText =
            Math.floor(this.score);

        deathScreen.classList.remove("hidden");

    },

    quit() {

        this.active = false;

        pauseBtn.classList.add("hidden");

        menuScreen.classList.remove("hidden");

    },

    togglePause() {

        this.paused = !this.paused;

        pauseBtn.innerText =
            this.paused ? "RESUME" : "STOP";

        if (!this.paused) loop();

    }

};

/* ========================================================= */
/* ====================== PLAYER ============================ */
/* ========================================================= */

const Player = {

    x: 100,
    y: 0,

    width: 40,
    height: 60,

    velocityY: 0,

    state: "RUN",
    rollTimer: 0,

    reset() {

        this.y = CFG.GROUND_Y;
        this.velocityY = 0;
        this.state = "RUN";

    },

    update() {

        this.velocityY += CFG.GRAVITY;
        this.y += this.velocityY;

        if (this.y > CFG.GROUND_Y) {
            this.y = CFG.GROUND_Y;
            this.velocityY = 0;
        }

        if (this.state === "ROLL") {
            this.rollTimer--;
            if (this.rollTimer <= 0)
                this.state = "RUN";
        }

    },

    draw() {

        const rolling = this.state === "ROLL";
        const drawY = rolling ? this.y + 30 : this.y;

        ctx.fillStyle = "rgba(0,0,0,0.3)";
        ctx.beginPath();
        ctx.ellipse(
            this.x + 20,
            CFG.GROUND_Y + 65,
            22,
            6,
            0,
            0,
            Math.PI * 2
        );
        ctx.fill();

        ctx.fillStyle = "#3498db";
        ctx.beginPath();
        ctx.roundRect(
            this.x,
            drawY + 15,
            40,
            35,
            8
        );
        ctx.fill();

        if (!rolling) {
            ctx.fillStyle = "#f1c27d";
            ctx.beginPath();
            ctx.arc(
                this.x + 20,
                drawY + 5,
                10,
                0,
                Math.PI * 2
            );
            ctx.fill();
        }

    }

};

/* ========================================================= */
/* ====================== WORLD ============================= */
/* ========================================================= */

const World = {

    obstacles: [],
    coins: [],

    reset() {

        this.obstacles = [];
        this.coins = [];

    },

    spawn() {

        if (Math.random() < 0.02) {
            this.obstacles.push({
                x: canvas.width,
                y: CFG.GROUND_Y,
                w: 40,
                h: 60
            });
        }

        if (Math.random() < 0.03) {
            this.coins.push({
                x: canvas.width,
                y: CFG.GROUND_Y - 40,
                w: 25,
                h: 25
            });
        }

    },

    update() {

        Game.score += CFG.SPEED * 0.1;

        this.spawn();

        this.obstacles.forEach(o => o.x -= CFG.SPEED);
        this.coins.forEach(c => c.x -= CFG.SPEED);

        this.obstacles = this.obstacles.filter(o => {
            if (checkCollision(Player, o)) {
                Game.over();
            }
            return o.x > -100;
        });

        this.coins = this.coins.filter(c => {
            if (checkCollision(Player, c)) {
                Game.coins += 10;
                return false;
            }
            return c.x > -100;
        });

    },

    draw() {

        ctx.fillStyle = "#222";
        ctx.fillRect(
            0,
            CFG.GROUND_Y + 60,
            canvas.width,
            canvas.height
        );

        ctx.fillStyle = "#c0392b";
        this.obstacles.forEach(o => {
            ctx.fillRect(o.x, o.y, o.w, o.h);
        });

        ctx.fillStyle = "#f1c40f";
        this.coins.forEach(c => {
            ctx.beginPath();
            ctx.arc(
                c.x + 12,
                c.y + 12,
                12,
                0,
                Math.PI * 2
            );
            ctx.fill();
        });

    }

};

/* ========================================================= */
/* ====================== COLLISION ========================= */
/* ========================================================= */

function checkCollision(p, o) {

    const py =
        p.state === "ROLL"
            ? p.y + 30
            : p.y;

    const ph =
        p.state === "ROLL"
            ? 30
            : 60;

    return (
        p.x < o.x + o.w &&
        p.x + p.width > o.x &&
        py < o.y + o.h &&
        py + ph > o.y
    );

}

/* ========================================================= */
/* ====================== LOOP ============================== */
/* ========================================================= */

function loop() {

    if (!Game.active || Game.paused) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    Player.update();
    World.update();

    World.draw();
    Player.draw();

    scoreDisplay.innerText =
        Math.floor(Game.score);

    coinDisplay.innerText =
        Game.coins;

    requestAnimationFrame(loop);

}

/* ========================================================= */
/* ====================== INPUT ============================= */
/* ========================================================= */

if (isDesktop) {

    window.addEventListener("keydown", e => {

        if (!Game.active) return;

        if (
            e.code === "Space" ||
            e.code === "ArrowUp"
        ) {
            Player.velocityY = CFG.JUMP_FORCE;
        }

        if (e.code === "ArrowDown") {
            Player.state = "ROLL";
            Player.rollTimer = 30;
        }

    });

} else {

    touchZones.classList.remove("hidden");

    touchZones.children[0].ontouchstart =
        () => Player.velocityY = CFG.JUMP_FORCE;

    touchZones.children[1].ontouchstart =
        () => {
            Player.state = "ROLL";
            Player.rollTimer = 30;
        };

}

/* ========================================================= */
/* ====================== UTILS ============================= */
/* ========================================================= */

function hideAllScreens() {

    menuScreen.classList.add("hidden");
    deathScreen.classList.add("hidden");

}

/* ========================================================= */
/* ====================== INIT ============================== */
/* ========================================================= */

window.onload = () => {

    canvas.width = innerWidth;
    canvas.height = innerHeight;

    CFG.GROUND_Y = canvas.height - 150;

};

</script>

</body>
</html>
